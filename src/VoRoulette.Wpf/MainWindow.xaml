<Window x:Class="VoRoulette.Wpf.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:VoRoulette.Wpf"
        mc:Ignorable="d"
        Title="VO Roulette App (WPF)"
        Width="1100"
        Height="900"
        MinWidth="1100"
        MinHeight="900">
  <Window.Resources>
    <Style x:Key="ArcadeImageButtonStyle" TargetType="Button">
      <Setter Property="Background" Value="Transparent" />
      <Setter Property="BorderBrush" Value="Transparent" />
      <Setter Property="BorderThickness" Value="0" />
      <Setter Property="Padding" Value="0" />
      <Setter Property="FocusVisualStyle" Value="{x:Null}" />
      <Setter Property="OverridesDefaultStyle" Value="True" />
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="Button">
            <Border Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    SnapsToDevicePixels="True">
              <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
            </Border>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>
  </Window.Resources>
  <Grid Margin="12">
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="360" />
      <ColumnDefinition Width="12" />
      <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>

    <Border Grid.Column="0" Padding="14" BorderBrush="#DDDDDD" BorderThickness="1" CornerRadius="10" Background="White">
      <Grid>
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto" />
          <RowDefinition Height="Auto" />
          <RowDefinition Height="*" />
          <RowDefinition Height="Auto" />
          <RowDefinition Height="Auto" />
          <RowDefinition Height="Auto" />
          <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <TextBlock FontSize="18" FontWeight="SemiBold" Text="キャラクター編集" />

        <StackPanel Grid.Row="1" Margin="0,10,0,8">
          <TextBlock Margin="0,0,0,4" Text="プリセット" />
          <ComboBox x:Name="PresetComboBox" MinWidth="180" SelectionChanged="PresetComboBox_SelectionChanged" />
          <Grid Margin="0,6,0,0">
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="*" />
              <ColumnDefinition Width="90" />
            </Grid.ColumnDefinitions>
            <TextBox x:Name="NewPresetNameTextBox" Margin="0,0,6,0" VerticalContentAlignment="Center" />
            <Button Grid.Column="1" Content="新規登録" Click="RegisterPreset_Click" />
          </Grid>
          <WrapPanel Margin="0,6,0,0">
            <Button x:Name="LoadJsonButton" Margin="0,0,6,0" Padding="10,6" Content="JSON読込" Click="LoadJson_Click" />
            <Button x:Name="SaveJsonButton" Padding="10,6" Content="JSON保存" Click="SaveJson_Click" />
          </WrapPanel>
          <TextBlock x:Name="PresetStatusText" Margin="0,6,0,0" Foreground="#555" />
        </StackPanel>

        <DataGrid Grid.Row="2"
                  x:Name="CharacterGrid"
                  AutoGenerateColumns="False"
                  CanUserAddRows="False"
                  CanUserDeleteRows="False"
                  HeadersVisibility="Column"
                  SelectionMode="Single"
                  Margin="0,0,0,8">
          <DataGrid.Columns>
            <DataGridCheckBoxColumn Width="32" Header="ON" Binding="{Binding Enabled, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
            <DataGridTextColumn Width="*" Header="名前" Binding="{Binding Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
            <DataGridTextColumn Width="48" Header="重み" Binding="{Binding Weight, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat=F1}" />
            <DataGridTemplateColumn Width="48" Header="削除">
              <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                  <Button Content="削除" Tag="{Binding}" Click="RemoveCharacter_Click" />
                </DataTemplate>
              </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
          </DataGrid.Columns>
        </DataGrid>

        <WrapPanel Grid.Row="3" Margin="0,0,0,8">
          <Button Margin="0,0,6,0" Padding="10,6" Content="全選択" Click="AllOn_Click" />
          <Button Margin="0,0,6,0" Padding="10,6" Content="全解除" Click="AllOff_Click" />
          <Button Padding="10,6" Content="反転" Click="Invert_Click" />
        </WrapPanel>

        <Grid Grid.Row="4" Margin="0,0,0,8">
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="84" />
            <ColumnDefinition Width="70" />
          </Grid.ColumnDefinitions>
          <TextBox x:Name="NewNameTextBox" Margin="0,0,6,0" VerticalContentAlignment="Center" />
          <TextBox x:Name="NewWeightTextBox" Grid.Column="1" Margin="0,0,6,0" VerticalContentAlignment="Center" Text="1" />
          <Button Grid.Column="2" Content="追加" Click="Add_Click" />
        </Grid>

        <StackPanel Grid.Row="5">
          <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
            <TextBlock VerticalAlignment="Center" Margin="0,0,8,0" Text="お気に入り" />
            <RadioButton x:Name="FavoriteLoadRadio" Margin="0,0,10,0" Content="読込" IsChecked="True" Checked="FavoriteMode_Checked" />
            <RadioButton x:Name="FavoriteSaveRadio" Content="保存" Checked="FavoriteMode_Checked" />
          </StackPanel>
          <WrapPanel Margin="0,6,0,0">
            <Button x:Name="FavoriteButton1" Width="60" Margin="0,0,6,0" Content="1" Click="FavoriteButton_Click" Tag="0" />
            <Button x:Name="FavoriteButton2" Width="60" Margin="0,0,6,0" Content="2" Click="FavoriteButton_Click" Tag="1" />
            <Button x:Name="FavoriteButton3" Width="60" Content="3" Click="FavoriteButton_Click" Tag="2" />
          </WrapPanel>
          <TextBlock x:Name="FavoriteStatusText" Margin="0,6,0,0" Foreground="#555" />
        </StackPanel>

        <Grid Grid.Row="6" Margin="0,10,0,0">
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
          </Grid.ColumnDefinitions>
          <StackPanel Margin="0,0,6,0">
            <TextBlock Text="最大ルーレット時間（秒）" />
            <TextBox x:Name="MaxTimeTextBox" Text="3.0" />
          </StackPanel>
          <StackPanel Grid.Column="1" Margin="6,0,0,0">
            <TextBlock Text="ストップから止まるまで（秒）" />
            <TextBox x:Name="DecelTimeTextBox" Text="1.0" />
          </StackPanel>
        </Grid>
      </Grid>
    </Border>

    <Border Grid.Column="2" Padding="10" BorderBrush="#DDDDDD" BorderThickness="1" CornerRadius="10" Background="White">
      <TabControl>
        <TabItem Header="ルーレット">
          <Grid Margin="10">
            <Grid.RowDefinitions>
              <RowDefinition Height="Auto" />
              <RowDefinition Height="Auto" />
              <RowDefinition Height="Auto" />
              <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <TextBlock FontSize="18" FontWeight="SemiBold" Text="ルーレット（純WPF）" />

            <WrapPanel Grid.Row="1" Margin="0,10,0,8">
              <Button x:Name="StartButton" Margin="0,0,6,0" Padding="10,6" Content="スタート" Click="Start_Click" />
              <Button x:Name="StopButton" Padding="10,6" Content="ストップ" IsEnabled="False" Click="Stop_Click" />
            </WrapPanel>

            <Border Grid.Row="2" Padding="10" BorderBrush="#222" BorderThickness="2" CornerRadius="8" Background="White" Margin="0,0,0,8">
              <TextBlock x:Name="CurrentText" Text="（未開始）" HorizontalAlignment="Center" FontSize="34" FontWeight="Bold" />
            </Border>

            <Grid Grid.Row="3">
              <local:RouletteWheelControl x:Name="WheelControl" />
            </Grid>
          </Grid>
        </TabItem>
        <TabItem Header="アーケード選択モード">
          <Grid Margin="10" HorizontalAlignment="Left" VerticalAlignment="Top">
            <Grid.RowDefinitions>
              <RowDefinition Height="Auto" />
              <RowDefinition Height="Auto" />
              <RowDefinition Height="*" />
              <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <Border Width="600" Background="#0F1A2F" BorderBrush="#6D7890" BorderThickness="1" CornerRadius="6" Padding="8" Margin="0,0,0,10">
              <TextBlock HorizontalAlignment="Center" FontSize="34" Foreground="#EAF1FF" FontWeight="Bold" Text="VR SELECT" />
            </Border>

            <WrapPanel Grid.Row="1" Margin="0,0,0,8" HorizontalAlignment="Left">
              <Button x:Name="ArcadeStartButton" Margin="0,0,6,0" Padding="10,6" Content="スタート" Click="ArcadeStart_Click" />
              <Button x:Name="ArcadeStopButton" Margin="0,0,6,0" Padding="10,6" Content="ストップ" IsEnabled="False" Click="ArcadeStop_Click" />
              <Button x:Name="VootToggleButton" Width="120" Content="DNA" Click="VootToggleButton_Click" Visibility="Collapsed" />
            </WrapPanel>

            <ScrollViewer Grid.Row="2" Width="600" HorizontalAlignment="Left" VerticalAlignment="Top" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
              <UniformGrid x:Name="ArcadeGridPanel" Columns="2" Width="600" HorizontalAlignment="Left" VerticalAlignment="Top" Background="Transparent" />
            </ScrollViewer>

            <Border Grid.Row="3" Width="600" HorizontalAlignment="Left" Margin="0,10,0,0" Padding="10" BorderBrush="#222" BorderThickness="2" CornerRadius="8" Background="White">
              <TextBlock x:Name="ArcadeCurrentText" Text="（未開始）" HorizontalAlignment="Center" FontSize="30" FontWeight="Bold" />
            </Border>
          </Grid>
        </TabItem>
      </TabControl>
    </Border>
  </Grid>
</Window>
